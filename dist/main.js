(()=>{var t={333:t=>{t.exports={Project:class{constructor(t,e,o,n){this.title=t,this.description=e,this.dueDate=o,this.tasks=n}addTask(t){this.tasks.push(t)}removeTask(t){this.tasks.splice(t,1)}}}},997:t=>{t.exports={Task:class{constructor(t,e,o,n,r,c,u=!1){this.title=t,this.description=e,this.dueDate=o,this.priority=n,this.notes=r,this.checklist=c,this.complete=u}toggleComplete(){this.complete=!this.complete}}}}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var c=e[n]={exports:{}};return t[n](c,c.exports,o),c.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=o(997),e=o(333);let n=[];if(localStorage.getItem("projects")){let o=JSON.parse(localStorage.getItem("projects"));console.log(n),o.forEach((o=>{let r=[];o.tasks.forEach((e=>{let o=new t.Task(e.title,e.description,e.dueDate,e.priority,e.notes,e.checklist,e.complete);r.push(o)}));let c=new e.Project(o.title,o.description,o.dueDate,r);n.push(c)}))}let r=[],c=document.querySelector("#projects"),u=(document.querySelector("#tasks"),document.querySelector("#project-input-form button")),a=document.querySelector("#task-input-form button");function l(){localStorage.setItem("projects",JSON.stringify(n)),c.innerHTML="",n.length>0&&n.forEach(((t,e)=>{let o=`\n    <div class="project-card">\n      <h3>${t.title}<button class="btn btn-delete-project" data-project-id="${e}"><i class="fa fa-trash"></i></button></h3>\n      <ul>`;t.tasks.length>0?o+=`${t.tasks.map(((t,o)=>`<li><div><button class="btn-complete"  data-project="${e}" data-id="${o}">O</button>${t.complete?"<del>":""}${t.title}${t.complete?"</del>":""}(<small>${t.dueDate}</small>)</div><div class="card-buttons"><button class="btn btn-delete" data-project="${e}" data-id="${o}"><i class="fa fa-trash"></i></button> <button class="btn btn-edit" data-project="${e}" data-id="${o}"><i class="fa fa-edit"></i></button></div></li>`)).join("")}`:o+="<li><strong>No tasks to display.</strong></li>",o+="</ul>\n    </div>\n    ",c.innerHTML+=o})),d(),function(){let t=[...document.querySelectorAll(".btn-delete")],e=[...document.querySelectorAll(".btn-edit")],o=[...document.querySelectorAll(".btn-complete")];console.log(t),console.log(e),console.log(o),o.forEach((t=>{t.addEventListener("click",(function(t){t.preventDefault();let e=t.target.getAttribute("data-project"),o=t.target.getAttribute("data-id");n[e].tasks[o].toggleComplete(),i(),l()}))})),t.forEach(((t,e)=>{t.addEventListener("click",(function(t){let e=t.target.getAttribute("data-project"),o=t.target.getAttribute("data-id");console.log("TRYING TO DELETE PROJECT INDEX "+e+"TASK INDEX"+o),n[e].removeTask(o),i(),l()}))})),e.forEach(((t,e)=>{t.addEventListener("click",(function(t){t.preventDefault();let e=document.querySelector(".btn-add-task"),o=document.createElement("button");o.classList+="btn btn-edit-task",o.innerText="Edit Task",document.querySelector("#task-input-form").replaceChild(o,e);let r=t.target.getAttribute("data-project"),c=t.target.getAttribute("data-id");document.querySelector("#task-input-form input[name=title]").value=n[r].tasks[c].title.toString(),document.querySelector("#task-input-form select[name=projectId]").selectedIndex=r,document.querySelector("#task-input-form input[name=description]").value=n[r].tasks[c].description.toString(),document.querySelector("#task-input-form input[name=dueDate]").value=n[r].tasks[c].dueDate.toString(),document.querySelector("#task-input-form input[name=checklist]").value=n[r].tasks[c].checklist.toString(),document.querySelector("#task-input-form input[name=notes]").value=n[r].tasks[c].notes.toString(),document.querySelector("#task-input-form input[name=priority]").value=n[r].tasks[c].priority.toString(),o.addEventListener("click",(function(t){t.preventDefault(),n[r].tasks[c].title=document.querySelector("#task-input-form input[name=title]").value,n[r].tasks[c].description=document.querySelector("#task-input-form input[name=description]").value,n[r].tasks[c].dueDate=document.querySelector("#task-input-form input[name=dueDate]").value,n[r].tasks[c].checklist=document.querySelector("#task-input-form input[name=checklist]").value,n[r].tasks[c].notes=document.querySelector("#task-input-form input[name=notes]").value,n[r].tasks[c].priority=document.querySelector("#task-input-form input[name=priority]").value,document.querySelector("#task-input-form").replaceChild(e,o),l()}))}))}))}(),p()}function i(){r=[],n.map((t=>{t.tasks.map((t=>{r.push(t.title)}))})),console.log("All tasks as combined array: "+r)}function s(t){let e=document.querySelector("select[name=projectId]");e.innerHTML="",t.length>0&&t.forEach(((t,o)=>{let n=document.createElement("option");n.setAttribute("data-id",o),n.value=o,n.innerText=t.title,e.appendChild(n),o++}))}function d(){[...document.querySelectorAll(".btn-delete-project")].forEach(((t,e)=>{t.addEventListener("click",(function(t){let e=t.target.getAttribute("data-project-id");n.splice(e,1),i(),l(),s(n)}))}))}function p(){let t=[...document.querySelectorAll("input")],e=[...document.querySelectorAll("select")];t.forEach((t=>{t.value=""})),e.forEach((t=>{t.selectedIndex=0}))}function m(){p(),document.querySelector("#project-input-form").style.display="none",document.querySelector("#task-input-form").style.display="none";let t=document.querySelector(".btn-add-task"),e=document.createElement("button");e.classList+="btn btn-edit-task",e.innerText="Edit Task",document.querySelector("#task-input-form").replaceChild(t,e)}u.addEventListener("click",(function(t){t.preventDefault();let o=document.querySelector("#project-input-form input[name=title]").value,r=document.querySelector("#project-input-form input[name=description]").value,c=document.querySelector("#project-input-form input[name=dueDate]").value,u=(document.querySelector("#project-input-form input[name=tasks]").value,new e.Project(o,r,c,[]));n.push(u),d(),l(),document.querySelector("#project-input-form").style.display="none",s(n)})),a.addEventListener("click",(function(e){e.preventDefault(),document.querySelector("#task-input-form").style.display="none",function(){let e=document.querySelector("#task-input-form input[name=title]").value,o=document.querySelector("#task-input-form select[name=projectId]").value,r=document.querySelector("#task-input-form input[name=description]").value,c=document.querySelector("#task-input-form input[name=dueDate]").value,u=(document.querySelector("#task-input-form input[name=checklist]").value,document.querySelector("#task-input-form input[name=notes]").value),a=document.querySelector("#task-input-form input[name=priority]").value,s=new t.Task(e,r,c,a,u,[],!1);n[o].addTask(s),i(),l()}()})),document.querySelector("#task-input-form").style.display="none",document.querySelector("#project-input-form").style.display="none",document.querySelector(".add-tasks").addEventListener("click",(()=>{document.querySelector("#task-input-form").style.display="block",document.querySelector("#task-input-form").setAttribute("style","position: absolute; top: 120px; left: 100px; width: 350px;  ")})),document.querySelector(".add-projects").addEventListener("click",(()=>{document.querySelector("#project-input-form").style.display="block",document.querySelector("#project-input-form").setAttribute("style","position: absolute; top: 120px; left: 100px; width: 350px;  ")})),document.querySelectorAll(".btn-exit").forEach((t=>{t.addEventListener("click",(t=>{m()}))})),document.addEventListener("keydown",(t=>{"Escape"===t.key&&m()})),l(),s(n)})()})();