(()=>{var t={333:t=>{t.exports={Project:class{constructor(t,e,n,o){this.title=t,this.description=e,this.dueDate=n,this.tasks=o}addTask(t){this.tasks.push(t)}removeTask(t){console.log("BEFORE SPLICE: "+this.tasks),this.tasks.splice(t,1),console.log("AFTER SPLICE: "+this.tasks)}}}},997:t=>{t.exports={Task:class{constructor(t,e,n,o,r,a,u=!1){this.title=t,this.description=e,this.dueDate=n,this.priority=o,this.notes=r,this.checklist=a,this.complete=u}toggleComplete(){this.complete=!this.complete}}}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=n(997),e=n(333);let o=[],r=[],a=document.querySelector("#projects"),u=(document.querySelector("#tasks"),document.querySelector("#project-input-form button")),c=document.querySelector("#task-input-form button"),i=new e.Project("Todo List","A dynamic project management application.","May 10, 2021",[]),s=new t.Task("Project setup","Webpack setup and create Project and Task classes","May 6, 2021","High","Use webpack",[]);function l(){a.innerHTML="",o.forEach(((t,e)=>{let n=`\n    <div class="project-card">\n      <h3>Project #${e+1}: <br/>${t.title}</h3><button class="btn btn-delete-project" data-project-id="${e}">Delete</button>\n      <p>${t.description}</p>\n      <strong>Task List</strong>\n      <ul>`;t.tasks.length>0?n+=`${t.tasks.map(((t,n)=>`<li><strong>${t.title}</strong><button class="btn btn-delete" data-project="${e}" data-id="${n}">Delete</button> <button class="btn btn-edit" data-project="${e}" data-id="${n}">Edit</button>(<small>${t.dueDate}</small>)</li>`)).join("")}`:n+="<li><strong>No tasks to display.</strong></li>",n+="</ul>\n    </div>\n    ",a.innerHTML+=n})),m(),[...document.querySelectorAll(".btn-delete-project")].forEach(((t,e)=>{t.addEventListener("click",(function(t){let e=t.target.getAttribute("data-project-id");o.splice(e,1),d(),l(),p(o)}))})),function(){let t=[...document.querySelectorAll("input")],e=[...document.querySelectorAll("select")];t.forEach((t=>{t.value=""})),e.forEach((t=>{t.selectedIndex=0}))}()}function d(){r=[],o.map((t=>{t.tasks.map((t=>{r.push(t.title)}))}))}function p(t){let e=document.querySelector("select[name=projectId]"),n=0;e.innerHTML="",t.forEach((t=>{let o=document.createElement("option");o.setAttribute("data-id",n),o.value=n,o.innerText=t.title,e.appendChild(o),n++}))}function m(){let t=[...document.querySelectorAll(".btn-delete")],e=[...document.querySelectorAll(".btn-edit")];t.forEach(((t,e)=>{t.addEventListener("click",(function(t){let e=t.target.getAttribute("data-project"),n=t.target.getAttribute("data-id");o[e].removeTask(n),d(),l()}))})),e.forEach(((t,e)=>{t.addEventListener("click",(function(t){t.preventDefault();let e=document.querySelector(".btn-add-task");e.innerText="Edit Task";let n=t.target.getAttribute("data-project"),r=t.target.getAttribute("data-id");document.querySelector("#task-input-form input[name=title]").value=o[n].tasks[r].title.toString(),document.querySelector("#task-input-form select[name=projectId]").selectedIndex=n,document.querySelector("#task-input-form input[name=description]").value=o[n].tasks[r].description.toString(),document.querySelector("#task-input-form input[name=dueDate]").value=o[n].tasks[r].dueDate.toString(),document.querySelector("#task-input-form input[name=checklist]").value=o[n].tasks[r].checklist.toString(),document.querySelector("#task-input-form input[name=notes]").value=o[n].tasks[r].notes.toString(),document.querySelector("#task-input-form input[name=priority]").value=o[n].tasks[r].priority.toString(),e.addEventListener("click",(function t(a){a.preventDefault(),o[n].tasks[r].title=document.querySelector("#task-input-form input[name=title]").value,console.log("PROCESS EDIT NOW!"+o[n].tasks[r].title),o[n].tasks[r].title=document.querySelector("#task-input-form input[name=title]").value,e.removeEventListener("click",t),l()}))}))}))}o.push(i),i.addTask(s),s.toggleComplete(),l(),u.addEventListener("click",(function(t){t.preventDefault();let n=document.querySelector("#project-input-form input[name=title]").value,r=document.querySelector("#project-input-form input[name=description]").value,a=document.querySelector("#project-input-form input[name=dueDate]").value,u=(document.querySelector("#project-input-form input[name=tasks]").value,new e.Project(n,r,a,[]));o.push(u),l(),p(o)})),c.addEventListener("click",(function(e){e.preventDefault(),function(){let e=document.querySelector("#task-input-form input[name=title]").value,n=document.querySelector("#task-input-form select[name=projectId]").value,r=document.querySelector("#task-input-form input[name=description]").value,a=document.querySelector("#task-input-form input[name=dueDate]").value,u=(document.querySelector("#task-input-form input[name=checklist]").value,document.querySelector("#task-input-form input[name=notes]").value),c=document.querySelector("#task-input-form input[name=priority]").value,i=new t.Task(e,r,a,c,u,[],!1);o[n].addTask(i),d(),l(),m()}()})),p(o),document.querySelector("#task-input-form").style.display="none",document.querySelector("#project-input-form").style.display="none",document.querySelector(".add-tasks").addEventListener("click",(()=>{document.querySelector("#task-input-form").style.display="block"})),document.querySelector(".add-projects").addEventListener("click",(()=>{document.querySelector("#project-input-form").style.display="block"}))})()})();